#define _USE_MATH_DEFINES
#include <cmath>
#include <cstdio> 
#include <chrono>
#include <thread>
#include "DigiCDriver.h"
#include <cstdlib>
#include <fstream>
#include <iostream>
#include <random>

#define TESTBYTES 0x33

uint8_t rawData[4] = {
0x16,0x23,0x12, 0x75 };

uint8_t specialData1[15] = { 
	0x73,0xee,0x3d,0xf7,
	0x5c,0x91,0xcd,0x66,
	0x03,0x66,0x58,0x4c,
	0x8d,0xc2,0x9a };

uint8_t specialData2[12] = { 0x71 ,0x75,0x69,0x65,0x74,0x20,0x6d,0x6f,0x6f,0x6e,0x6c,0x69};
uint8_t specialData3[15] = {0x6f,0x17,0x6c,0x5a,0xe6,0x00,0x18,0xa6,0xd8,0x24,0x0e,0x58,0xfe,0xd8,0x8a};
uint8_t specialData4[15] = {0x6e,0x1d,0xc4,0xb7,0x10,0x18,0x37,0x18,0xaa,0xf3,0x07,0xea,0x6f,0xcd,0xdc};
uint8_t specialData5[15] = {0xc4,0x42,0x9c,0xd2,0xde,0x79,0xa7,0xaa,0x58,0x62,0x65,0x1c,0xe8,0xb3};
uint8_t specialData6[14] = {0x59,0xe6,0xbe,0xca,0x73,0x1b,0xd2,0xe8,0xd4,0x17,0x49,0x54,0xa6};

int8_t buffer[32] = { 
	0xFF,0x12,0x34,0x56,0xFF,0x98,0x76,0x54,
	0xFF,0xab,0xcd,0xef,0xFF,0x80,0x58,0x21,
	0x62,0x01,0x02,0x19,0x98,0x10,0x26,0x00,
	0x10,0x24,0x63,0x76,0x56,0x97,0x21,0x96
};
int8_t bufferb[10240];



int main() {
	Init_libMPSSE(); //This Line is important, DO NOT DELETE it!
	// And it MUST be placed here, at first line in main function. Otherwise, the spi channel can't open.
	//Why? May be the FTDI's black magic.

	DigiCDataUtil u1;
	DigiCDriver d1;
	std::string fp("C:\\Users\\cn\\Desktop\\Project\\DigiC-PC\\cut.mp4");
	std::random_device rd;
	std::mt19937 rng(rd());
	std::uniform_int_distribution<int> uni(0,255);

	d1.sendFile(fp);
	system("pause");
	//int i=0;
	//while (1) {
	//	typDigiCPack a;
	//	a=u1.PacketData(specialData6);
	//	d1.sendPacket(a);
	//	i++;
	//	if (i > 100)
	//		i = 0;
	//}
}
